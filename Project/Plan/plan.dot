digraph G {
  rankdir = "RL";
  node [shape = rect, fontname = "sans-serif"];
  "aws_eip.nat" [label="aws_eip.nat"];
  "aws_iam_instance_profile.ec2_instance_profile" [label="aws_iam_instance_profile.ec2_instance_profile"];
  "aws_iam_role.ec2_role" [label="aws_iam_role.ec2_role"];
  "aws_iam_role_policy.ec2_policy" [label="aws_iam_role_policy.ec2_policy"];
  "aws_internet_gateway.main" [label="aws_internet_gateway.main"];
  "aws_nat_gateway.main" [label="aws_nat_gateway.main"];
  "aws_route_table.private" [label="aws_route_table.private"];
  "aws_route_table.public" [label="aws_route_table.public"];
  "aws_route_table_association.private_subnet1" [label="aws_route_table_association.private_subnet1"];
  "aws_route_table_association.private_subnet2" [label="aws_route_table_association.private_subnet2"];
  "aws_route_table_association.public_subnet1" [label="aws_route_table_association.public_subnet1"];
  "aws_route_table_association.public_subnet2" [label="aws_route_table_association.public_subnet2"];
  "aws_security_group.ec2" [label="aws_security_group.ec2"];
  "aws_security_group.lb" [label="aws_security_group.lb"];
  "aws_security_group.rds" [label="aws_security_group.rds"];
  "aws_subnet.private_subnet1" [label="aws_subnet.private_subnet1"];
  "aws_subnet.private_subnet2" [label="aws_subnet.private_subnet2"];
  "aws_subnet.public_subnet1" [label="aws_subnet.public_subnet1"];
  "aws_subnet.public_subnet2" [label="aws_subnet.public_subnet2"];
  "aws_vpc.main" [label="aws_vpc.main"];
  subgraph "cluster_module.alb" {
    label = "module.alb"
    fontname = "sans-serif"
    "module.alb.aws_lb.app_alb" [label="aws_lb.app_alb"];
    "module.alb.aws_lb_listener.app_listener" [label="aws_lb_listener.app_listener"];
    "module.alb.aws_lb_target_group.app_tg" [label="aws_lb_target_group.app_tg"];
    "module.alb.aws_lb_target_group_attachment.app_tg_attachment" [label="aws_lb_target_group_attachment.app_tg_attachment"];
  }
  subgraph "cluster_module.ec2" {
    label = "module.ec2"
    fontname = "sans-serif"
    "module.ec2.aws_instance.app_server" [label="aws_instance.app_server"];
  }
  subgraph "cluster_module.rds" {
    label = "module.rds"
    fontname = "sans-serif"
    "module.rds.aws_db_instance.main" [label="aws_db_instance.main"];
    "module.rds.aws_db_subnet_group.main" [label="aws_db_subnet_group.main"];
  }
  subgraph "cluster_module.vpc" {
    label = "module.vpc"
    fontname = "sans-serif"
    "module.vpc.aws_eip.nat" [label="aws_eip.nat"];
    "module.vpc.aws_internet_gateway.main" [label="aws_internet_gateway.main"];
    "module.vpc.aws_nat_gateway.main" [label="aws_nat_gateway.main"];
    "module.vpc.aws_route_table.private" [label="aws_route_table.private"];
    "module.vpc.aws_route_table.public" [label="aws_route_table.public"];
    "module.vpc.aws_route_table_association.private_subnet1" [label="aws_route_table_association.private_subnet1"];
    "module.vpc.aws_route_table_association.private_subnet2" [label="aws_route_table_association.private_subnet2"];
    "module.vpc.aws_route_table_association.public_subnet1" [label="aws_route_table_association.public_subnet1"];
    "module.vpc.aws_route_table_association.public_subnet2" [label="aws_route_table_association.public_subnet2"];
    "module.vpc.aws_subnet.private_subnet1" [label="aws_subnet.private_subnet1"];
    "module.vpc.aws_subnet.private_subnet2" [label="aws_subnet.private_subnet2"];
    "module.vpc.aws_subnet.public_subnet1" [label="aws_subnet.public_subnet1"];
    "module.vpc.aws_subnet.public_subnet2" [label="aws_subnet.public_subnet2"];
    "module.vpc.aws_vpc.main" [label="aws_vpc.main"];
  }
  "aws_iam_instance_profile.ec2_instance_profile" -> "aws_iam_role.ec2_role";
  "aws_iam_role_policy.ec2_policy" -> "aws_iam_role.ec2_role";
  "aws_internet_gateway.main" -> "aws_vpc.main";
  "aws_nat_gateway.main" -> "aws_eip.nat";
  "aws_nat_gateway.main" -> "aws_subnet.public_subnet1";
  "aws_route_table.private" -> "aws_nat_gateway.main";
  "aws_route_table.public" -> "aws_internet_gateway.main";
  "aws_route_table_association.private_subnet1" -> "aws_route_table.private";
  "aws_route_table_association.private_subnet1" -> "aws_subnet.private_subnet1";
  "aws_route_table_association.private_subnet2" -> "aws_route_table.private";
  "aws_route_table_association.private_subnet2" -> "aws_subnet.private_subnet2";
  "aws_route_table_association.public_subnet1" -> "aws_route_table.public";
  "aws_route_table_association.public_subnet1" -> "aws_subnet.public_subnet1";
  "aws_route_table_association.public_subnet2" -> "aws_route_table.public";
  "aws_route_table_association.public_subnet2" -> "aws_subnet.public_subnet2";
  "aws_security_group.ec2" -> "aws_security_group.lb";
  "aws_security_group.lb" -> "module.vpc.aws_vpc.main";
  "aws_security_group.rds" -> "aws_security_group.ec2";
  "aws_subnet.private_subnet1" -> "aws_vpc.main";
  "aws_subnet.private_subnet2" -> "aws_vpc.main";
  "aws_subnet.public_subnet1" -> "aws_vpc.main";
  "aws_subnet.public_subnet2" -> "aws_vpc.main";
  "module.alb.aws_lb.app_alb" -> "aws_security_group.lb";
  "module.alb.aws_lb.app_alb" -> "module.vpc.aws_subnet.public_subnet1";
  "module.alb.aws_lb.app_alb" -> "module.vpc.aws_subnet.public_subnet2";
  "module.alb.aws_lb_listener.app_listener" -> "module.alb.aws_lb.app_alb";
  "module.alb.aws_lb_listener.app_listener" -> "module.alb.aws_lb_target_group.app_tg";
  "module.alb.aws_lb_target_group.app_tg" -> "module.vpc.aws_vpc.main";
  "module.alb.aws_lb_target_group_attachment.app_tg_attachment" -> "module.alb.aws_lb_target_group.app_tg";
  "module.alb.aws_lb_target_group_attachment.app_tg_attachment" -> "module.ec2.aws_instance.app_server";
  "module.ec2.aws_instance.app_server" -> "aws_iam_instance_profile.ec2_instance_profile";
  "module.ec2.aws_instance.app_server" -> "aws_security_group.ec2";
  "module.ec2.aws_instance.app_server" -> "module.vpc.aws_subnet.private_subnet1";
  "module.ec2.aws_instance.app_server" -> "module.vpc.aws_subnet.private_subnet2";
  "module.rds.aws_db_instance.main" -> "aws_security_group.rds";
  "module.rds.aws_db_instance.main" -> "module.rds.aws_db_subnet_group.main";
  "module.rds.aws_db_subnet_group.main" -> "module.vpc.aws_subnet.private_subnet1";
  "module.rds.aws_db_subnet_group.main" -> "module.vpc.aws_subnet.private_subnet2";
  "module.vpc.aws_internet_gateway.main" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_nat_gateway.main" -> "module.vpc.aws_eip.nat";
  "module.vpc.aws_nat_gateway.main" -> "module.vpc.aws_subnet.public_subnet1";
  "module.vpc.aws_route_table.private" -> "module.vpc.aws_nat_gateway.main";
  "module.vpc.aws_route_table.public" -> "module.vpc.aws_internet_gateway.main";
  "module.vpc.aws_route_table_association.private_subnet1" -> "module.vpc.aws_route_table.private";
  "module.vpc.aws_route_table_association.private_subnet1" -> "module.vpc.aws_subnet.private_subnet1";
  "module.vpc.aws_route_table_association.private_subnet2" -> "module.vpc.aws_route_table.private";
  "module.vpc.aws_route_table_association.private_subnet2" -> "module.vpc.aws_subnet.private_subnet2";
  "module.vpc.aws_route_table_association.public_subnet1" -> "module.vpc.aws_route_table.public";
  "module.vpc.aws_route_table_association.public_subnet1" -> "module.vpc.aws_subnet.public_subnet1";
  "module.vpc.aws_route_table_association.public_subnet2" -> "module.vpc.aws_route_table.public";
  "module.vpc.aws_route_table_association.public_subnet2" -> "module.vpc.aws_subnet.public_subnet2";
  "module.vpc.aws_subnet.private_subnet1" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_subnet.private_subnet2" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_subnet.public_subnet1" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_subnet.public_subnet2" -> "module.vpc.aws_vpc.main";
}
